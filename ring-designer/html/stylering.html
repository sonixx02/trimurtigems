<!DOCTYPE html>
<html class=" js no-mobile desktop no-ie en-section en-tools-section en-tools-stylering-section w-1920 gt-240 gt-320 gt-480 gt-640 gt-768 gt-800 gt-1024 gt-1280 gt-1440 gt-1680 no-portrait landscape gradient rgba opacity textshadow multiplebgs boxshadow borderimage borderradius cssreflections csstransforms csstransitions no-touch no-retina fontface domloaded" lang="en" prefix="fb: http://www.facebook.com/2008/fbml" id="index-page">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freestyle Ring</title>

    <meta name="description" property="og:description" content="Create a freestyle ring on Jweel !">
    <meta property="og:title" content="Create a freestyle ring on Jweel!">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:locale:alternate" content="en_US">
    <meta property="og:image" content="../static/img/pics/AngelRing.png">

<link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="../static/css/bootstrap-select.min.css">
<link rel="stylesheet" type="text/css" href="../static/css/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="../static/css/base.css">
<link rel="stylesheet" type="text/css" href="../static/css/class.css">
<link rel="stylesheet" type="text/css" href="../static/css/stylering-components.css">

    <style>

            #menu-signed { display:none; }

    </style>

<style>
    .file-mgmt {
        position: absolute;
        top: 60px;
        left: 0px;
        margin-top: 10px;
        margin-left: 10px;
    }

    .file-mgmt button {
        width: 44px;
        height: 44px;
        margin: 2px;
    }
</style>
<link href="../static/css/keys.css" rel="stylesheet" type="text/css">

<link href="../static/css/stylering.css" rel="stylesheet" type="text/css">

    <!-- Core Dependencies -->
    <script src="../static/js/headjs/head.min.js"></script>
    <script src="../static/js/jquery/jquery-1.11.1.min.js"></script>
    <script src="../static/js/jquery/jquery-ui.js"></script>
    <script src="../static/js/jquery/jquery.lazyload.min.js"></script>
    
    <!-- Three.js and Dependencies -->
    <script src="../static/js/threejs/build/three.js"></script>
    <script src="../static/js/threejs/examples/js/libs/dat.gui.min.js"></script>
    
    <!-- Ring Designer Core -->
    <script src="../static/js/site/SMDef.js"></script>
    <script src="../static/js/site/fileManager.js"></script>
    <script src="../static/js/site/cartManager.js"></script>
    <script src="../static/js/site/cartSelectManager.js"></script>
    
    <!-- Backbone Dependencies -->
    <script src="../static/js/backbone/underscore-min.js"></script>
    <script src="../static/js/backbone/backbone.js"></script>
    
    <!-- Ring Designer Components -->
    <script src="../static/js/site/imageManager.min.js"></script>
    <script src="../static/js/site/jweel.min.js"></script>
    <script src="../static/js/site/objmtloader.js"></script>
    <script src="../static/js/skim/skim.min.js"></script>
    
    <!-- Initialize Ring Designer -->
    <script src="../static/js/site/init.js"></script>

    <style type="text/css">.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
</style></head>

    <body>
        <div class="wrapper">
            <div class="menu-header">



<nav id="main-nav" class="navbar menu-header" role="navigation">
        <div class="logo pull-left">
            <a href="https://www.jweel.com/index.html" class="standard" aria-label="Jweel Homepage">Jweel</a>
        </div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ul" aria-label="Toggle navigation">
                <span class="sr-only">Browse</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <ul class="nav collapse navbar-collapse navbar-nav pull-right" id="navbar-ul">
            <li>
                <a href="tools.html" title="Create a new 3D jewel">Create</a>
            </li>
            <li class="dropdown more-dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" title="About us">About <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="faq.html" title="Frequently Asked Questions">FAQ</a></li>
                    <li><a href="press.html" title="Press coverage">Press review</a></li>
                    <li><a href="about.html" title="About Jweel">About Jweel</a></li>
                    <li class="divider"></li>
                    <li><a rel="nofollow noopener noreferrer" href="http://www.facebook.com/jweelWorld" title="Follow us on Facebook" aria-label="Follow us on Facebook"><i class="icon-fb" aria-hidden="true"></i>&nbsp;&nbsp;Facebook</a></li>
                    <li><a rel="nofollow noopener noreferrer" href="https://www.pinterest.com/jweelworld/" title="Follow us on Pinterest" aria-label="Follow us on Pinterest"><i class="icon-pin" aria-hidden="true"></i>&nbsp;&nbsp;Pinterest</a></li>
                    <li><a rel="nofollow noopener noreferrer" href="https://twitter.com/JweelWorld" title="Follow us on Twitter" aria-label="Follow us on Twitter"><i class="icon-tw" aria-hidden="true"></i>&nbsp;&nbsp;Twitter</a></li>
                </ul>
            </li>
            <li id="menu-unsigned">
                <button type="button" id="connect-popup-trigger" class="btn" onclick="displayEndOfService()">Sign in</button>
                <button type="button" class="btn btn-white" onclick="displayEndOfService()">Register</button>
            </li>
        </ul>
        <div class="clearfix"></div>
    </nav>

            </div>
            <div id="content">

    <div id="end-of-service-display" class="fullsize-shadow">
      <div class="popup">
          <div class="box-title text-center">
              <img alt="jweel logo" src="../static/img/logo/jweel.png">
          </div>
          <h2><b> End of Jweel services </b></h2>
          <p class="text-left">Following personnal opportunities for Jweel founders, and no one to continue Jweel maintenance, the Jweel adventure is now over. Many thanks to all our customers and designers, who trusted us during the few years of service.</p>
           <p class="text-left"><b>With more than 12 000 designs shared 3000 times, we are happy that we could help our 29 000 users to express their creativity.</b></p>
          <p class="text-left">On demand manufacturing is closed, but we have opened the applications and they are now accessible for free! You can save design files, and export to 3D standard format for manufacturing, enjoy!</p>
          <p class="text-danger">Warning : all account owners should save their models as soon as possible, since we may have to clean our whole database soon.</p>
          <p class="text-info text-left">If you have any question regarding our technologies, or the Jweel story, feel free to contact us personnally or using contact[at]jweel.com, We would be glad to share our experience and help you with your projects :)</p>
          <button type="button" class="btn btn-blue" id="fadeout-end-of-service">OK</button>
      </div>
    </div>


<section class="creation-section">
    <div class="box-creation">



<ul class="nav nav-tabs nav-tabs-icons">
    <li class="active tool-menu-left">
        <a href="stylering.html" class="skimring-trigger">
            <i></i>
            <span><b>Freestyle Ring</b></span>
        </a>
    </li>
<!--
    <li class="tool-menu-left">
        <a href="#" class="Textring-trigger">
            <i></i>
            <span><b>Helper</b></span>
        </a>
    </li>
-->
</ul>
<div class="vertical-contents">
    <div class="content">
        <h2>Freestyle Ring
            <a href="stylering-tuto.html" data-toggle="popover" data-html="true" data-content="Click here to see the tutorial." class="adjust-tuto-link pull-right icon-question icon-right" target="_blank" style="display: none;" data-original-title="" title=""></a>
        </h2>
    </div>
    <div class="content">

<div class="panel-group" id="accordion">
  <!-- BootStrap Collapse Files Panel Begin-->
  <div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapseFour">
      <h4 class="panel-title">
            File
            <i data-toggle="popover" data-original-title="File management" data-content="Save, copy, share or reset your jewel" class="pull-right icon-question icon-right"></i>
      </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapse in">
      <div class="panel-body">
        <div id="file-button-list" class="col-md-12" style="margin:0px; padding:0px;">

            <button type="button" class="save-file-trigger btn action-button surface-show-hook shortcut-tooltip" data-toggle="tooltip" data-html="true" title="Save">
                <img src="../static/img/btn/IconSave.png" alt="Save design">
            </button>
            <button type="button" data-container="body" class="load-file-trigger btn action-button surface-show-hook shortcut-tooltip" data-toggle="tooltip" data-html="true" title="Load">
                <img src="../static/img/btn/IconLoadFile.png" alt="Load file icon">
            </button>
            <input id="load-file-input" type="file" accept=".jweel" style="display: none;">

            <button id="copy-file" type="button" class="btn action-button surface-show-hook shortcut-tooltip" data-toggle="tooltip" data-html="true" title="Save as">
                <img src="../static/img/btn/IconSaveAs.png" alt="Save design as">
            </button>
            <button id="new-file" type="button" class="btn action-button shortcut-tooltip" data-toggle="tooltip" data-html="true" title="New object">
                <img src="../static/img/btn/IconNewFile.png" alt="Create new design">
            </button>
            <button id="publish-file" type="button" class="btn action-button surface-show-hook shortcut-tooltip" data-toggle="tooltip" data-html="true" title="Publish your object">
                <img src="../static/img/btn/IconShare.png" alt="Share design">
            </button>

        </div>
        <button id="saving-button" class="btn btn-dark col-md-11">
            <img src="../static/img/elt/loading.gif" alt="Saving in progress" class="loading-img"> Saving...
        </button>
      </div>
    </div>
  </div>

  <!-- BootStrap Collapse Edition Panel Begin-->
  <div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapseOne">
      <h4 class="panel-title">
        Edit
        <i data-toggle="popover" data-original-title="Edit" data-content="Undo or redo an action, &lt;/br&gt;add a ring, it&#39;s here !" class="pull-right icon-question icon-right"></i>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse ">
      <div class="panel-body">
        <button type="button" data-action-on-click="ctrl+z:down" class="btn action-button undo-trigger shortcut-tooltip action-on-click">
            <img src="../static/img/btn/IconUndo.png" alt="Undo last action">
        </button>
        <button type="button" data-action-on-click="ctrl+y:down" data-toggle="tooltip" data-html="true" class="btn action-button redo-trigger shortcut-tooltip action-on-click">
            <img src="../static/img/btn/IconRedo.png" alt="Redo last action">
        </button>
        <button id="add-ring" type="button" class="btn action-button add-trigger shortcut-tooltip action-on-click" data-action-on-click="b:down" data-toggle="tooltip" data-html="true" title="" data-original-title="
                    Add an additional ring
                    &lt;br/&gt;Short keys:  &lt;kbd class=&#39;light&#39;&gt;b&lt;/kbd&gt;
                    ">
            <img src="../static/img/btn/IconAddRing.png" alt="Add a ring">
        </button>
        <button id="add-two-ring" type="button" class="btn action-button add-trigger shortcut-tooltip action-on-click" data-action-on-click="n:down" data-toggle="tooltip" data-html="true" title="" data-original-title="
                    Add two symmetrical rings
                    &lt;br/&gt;Short keys:  &lt;kbd class=&#39;light&#39;&gt;n&lt;/kbd&gt;
                   ">
            <img src="../static/img/btn/IconAddTwoRing.png" alt="Add a ring">
        </button>
      </div>
    </div>
  </div>

  <!-- BootStrap Collapse Symmetry Panel Begin-->
  <div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapseTwo">
      <h4 class="panel-title">
        Symmetries
        <i data-toggle="popover" data-html="true" data-original-title="Symmetries " data-content="&lt;p&gt;Symmetries let you create structured object by automatically duplicate your creation on one side or the other relative to the selected plan&lt;/p&gt;&lt;img class=&#39;img-popover&#39; src=&#39;./static/imgsym/SymTipSimpleSym.png&#39;/&gt;&lt;p&gt;You can combine different symmetries to get more structured objects&lt;/p&gt;&lt;img class=&#39;img-popover&#39; src=&#39;./static/imgsym/SymTipMultiSym.png&#39;/&gt;&lt;p&gt;&lt;b&gt;For more help, see the tutorial.&lt;/b&gt;&lt;/p&gt;" class="pull-right icon-question icon-right"></i>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse in">
      <div class="panel-body">
        <button id="xSym" type="button" data-action-on-click="x:down" data-action-on-hover="shift+x:down" class="btn action-button sym-box shortcut-tooltip active action-on-click" data-toggle="tooltip" data-html="true" data-container="body" title="" data-original-title="Symmetry X&lt;br/&gt;Short keys:  &lt;kbd class=&#39;light&#39;&gt;x&lt;/kbd&gt;">
            <img src="../static/img/btn/IconeSymmetryX.png" alt="X">
        </button>
        <button id="ySym" type="button" data-action-on-click="c:down" data-action-on-hover="shift+c:down" class="btn action-button sym-box shortcut-tooltip action-on-click" data-toggle="tooltip" data-html="true" data-container="body" title="" data-original-title="Symmetry Y&lt;br/&gt;Short keys:  &lt;kbd class=&#39;light&#39;&gt;c&lt;/kbd&gt;">
            <img src="../static/img/btn/IconeSymmetryY.png" alt="Y">
        </button>
        <button id="zSym" type="button" data-action-on-click="v:down" data-action-on-hover="shift+v:down" class="btn action-button sym-box shortcut-tooltip action-on-click active" data-toggle="tooltip" data-html="true" data-container="body" title="" data-original-title="Symmetry Z&lt;br/&gt;Short keys:  &lt;kbd class=&#39;light&#39;&gt;v&lt;/kbd&gt;">
            <img src="../static/img/btn/IconeSymmetryZ.png" alt="Z">
        </button>
      </div>
    </div>
  </div>
    <!-- BootStrap Collapse Surface Panel Begin-->
  <div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" data-target="#collapseThree">
      <h4 class="panel-title">
        Appearance
        <i data-toggle="popover" data-original-title="Appearance" data-html="true" data-content="Elements in the scene can have 2 appearances: &lt;ul&gt;&lt;li&gt;&lt;p&gt;mechanical: objects look like their skeleton and blend sharply&lt;/p&gt;&lt;img class=&#39;img-popover&#39; src=&#39;./static/imgpics/mecanic.png&#39;/&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;organic: objects are bulgier and blend smoothly&lt;/p&gt;&lt;img class=&#39;img-popover&#39; src=&#39;./static/imgpics/organic.png&#39;/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;For more help, see the tutorial.&lt;/b&gt;&lt;/p&gt;" class="pull-right icon-question icon-right"></i>
      </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse in">
      <div class="panel-body">
        <select class="surface-switch-trigger selectpicker show-tick dropup action-on-click" data-with="100%" data-container="body" style="display: none;">
            <option selected="" value="mecha"> Mechanic</option>
            <option value="orga">Organic</option>
        </select>
      </div>
    </div>
  </div>
</div>

    </div>
    <div class="content">
        <button id="surface-trigger" type="button" class="btn generate-3d-trigger surface-show-hook shortcut-tooltip action-on-click btn-blueinvert" data-toggle="tooltip" data-html="true" title="" data-action-on-click="s:down" data-original-title="Short keys:  &lt;kbd class=&#39;light&#39;&gt;s&lt;/kbd&gt;">View my ring</button>
    </div>

</div>

    </div>
    <div class="box-creation box-right vertical-center-right">

<div id="helper-content">
    <!--<h2 class="helper-title">{% trans "Short keys" %}</h2>-->
    <div id="controlbox"></div>
</div>

<div id="cart-content" class="content">
    <div class="form-controls">
        <div class="form-group">
            <label for="material-select">Material</label>
            <select id="material-select" class="form-control" aria-label="Select material">
                <option value="silver" selected="">Silver</option>
                <option value="gold">Gold</option>
                <option value="bronze">Bronze</option>
                <option value="brass">Brass</option>
                <option value="hdss">Steel</option>
                <option value="titanium">Titanium</option>
            </select>
        </div>

        <div class="form-group">
            <label for="finish-select">Finish</label>
            <div id="finish-select" class="finish-options" aria-label="Select finish"></div>
        </div>

        <div class="form-group">
            <label for="ring-size">Ring Size</label>
            <div class="range-container">
                <label id="ring-size-label">Ring Size:</label>
                <div class="range-value" aria-live="polite">54mm</div>
                <div class="range range-size" 
                     role="slider" 
                     aria-labelledby="ring-size-label"
                     aria-valuemin="45" 
                     aria-valuemax="75" 
                     aria-valuenow="54"
                     tabindex="0"></div>
            </div>
        </div>
    </div>

    <label><b>Select a ring size:</b></label>
    <a href="stylering.html" class="size-guide-trigger" data-toggle="modal" data-target="#sizeguide"><i class="icon-question" data-original-title="" title=""></i>&nbsp;Size explanation</a>
    <div class="range-container">
        <div class="range-value">54mm</div>
        <div class="range range-size ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" aria-disabled="false"><a class="ui-slider-handle ui-state-default ui-corner-all" href="stylering.html" style="left: 60.5263%;"></a></div>
    </div>


    <!--
    <div class="price text-right">
        <small>No price available</small>
    </div>

    <div class="shipment text-right"></div>
    -->
    <span class="bounding-box-info text-right" style="visibility: hidden;"><b class="size-info"></b></span>
    <span class="bounding-box-info size-guide-trigger text-right" style="visibility: hidden;"><b><span class="dim-x">00.00</span> x <span class="dim-y">00.00</span> x <span class="dim-z">00.00</span>mm</b></span>

        <button type="button" class="btn btn-block btn-blue surface-show-hook" id="export-obj">Export to OBJ</button>


    <!--<button type="button" class="btn btn-block btn-blue add-cart-trigger surface-show-hook action-on-click" disabled>Add to cart</button>
    <p style="color: red; margin-top: 20px;">Sorry, freestyle creations are not available for order anymore.</p>





    <button type="button" class="save-file-trigger btn btn-block btn-dark save-creation-trigger surface-show-hook" disabled><span class="icon-save pull-left"></span>&nbsp;Save</button>
    -->

</div>


    </div>



    <div id="webgl">

        <canvas id="viewerCanvas" width="1920" height="860" tabindex="0" contenteditable="true" style="width: 1920px; height: 860px; visibility: visible;"></canvas>
        <div class="alert alert-warning alert-bottom alert-surfacestopped alert-dismissable" style="display: none;">
            <p style="text-align: center;">Computation seems to be slow...<a href="stylering.html" class="recompute-surface-trigger alert-link" style="margin-left: 10px;"> Relaunch</a></p>
        </div>
    </div>


    <div id="tooltip" style="display: block;">
        <div class="tip"><b>Help:</b> Use your mouse to move scene elements. Maintain an action key pressed to perform specific actions. </div>
        <button id="shrink-tooltip">-</button>
    </div>
    <button id="expand-tooltip" class="btn action-button shortcut-tooltip" data-placement="left" data-toggle="tooltip" title="" data-original-title="Display Help">?</button>
    <p id="infos-line" style="display: none; visibility: visible; position: absolute; bottom: 10px; right: 10px; z-index: 2;">ø 1 mm</p>

    <div class="hand-buttons" style="display: none;">
        <!--<button class="btn action-button btn-hand btn-hand-left"><img alt="jweel hand" src="../static/img/btn/hand_icon_white.png"/></button>-->
        <button class="btn action-button btn-hand btn-hand-right"><img alt="jweel hand" src="../static/img/btn/hand_icon_white.png"></button>
    </div>

</section>

</div>



<div id="sizeguide" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">How to get my ring size?</h4>
      </div>
      <div class="modal-body">
        <!-- accordion" -->

        <p style="margin:20px;">Here are three ways to get your ring size.</p>
        <div class="panel-group" id="csg">
          <div class="panel panel-default">
            <div class="panel-heading" data-toggle="collapse" data-target="#csg1" data-parent="#csg">
              <h4 class="panel-title">Method 1: with a string</h4>
            </div>
            <div id="csg1" class="panel-collapse collapse">
                <img class="img-thumbnail" style="margin: 20px;" alt="taille de doigt" src="../static/img/pics/sizeguide.jpg">
                <ol>
                    <li>Take a string or a piece of paper.</li>
                    <li>Wrap it around your finger (make sure the string glides easily).</li>
                    <li>Use a pen to mark the spot where the string joins.</li>
                    <li>Measure the string with a ruler (mm).</li>
                </ol>
            </div>
            <div class="panel-heading" data-toggle="collapse" data-target="#csg2" data-parent="#csg">
              <h4 class="panel-title">Method 2: with one of your rings</h4>
            </div>
            <div id="csg2" class="panel-collapse collapse">
                <img class="img-thumbnail" style="margin: 20px;" alt="taille de doigt" src="../static/img/pics/sizeguide2.png">
                <ol>
                    <li>Take one of your rings.</li>
                    <li>Measure (mm) the inner diameter of the ring with a ruler.</li>
                    <li>Multiply by 3.14</li>
                </ol>
            </div>
            <div class="panel-heading" data-toggle="collapse" data-target="#csg3" data-parent="#csg">
              <h4 class="panel-title">Method 3: from your jewelry known ring size</h4>
            </div>
            <div id="csg3" class="panel-collapse collapse">
                <p style="margin:20px;">If you already know your ring size in a specific jewelry standard, use the following table to convert it back to mm.</p>
                <img class="img-thumbnail" style="width:100%;" alt="conversions" src="../static/img/pics/sizeguide3-en.png">
            </div>
          </div>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


            </div>




<div id="connect-popup-display" class="fullsize-shadow">
  <div class="popup" style="height: 340px;">
    <form id="connect-form" method="POST">
      <div class="box-title">
          <img alt="jweel logo" src="../static/img/logo/jweel.png">
          <div style="position: absolute; top: 0; right: 0; text-align:right; padding-right: 10px;">
            <h2>Sign in!</h2><br>
            <a id="to-register-trigger" style="display:inline-block;" href="stylering.html">Not registered yet?</a><br>
            <span class="error"></span>
          </div>
      </div>
      <div class="form-group">
        <label for="login-email">E-mail Address</label>
        <input type="email" class="form-control" id="login-email" name="email" placeholder="Adresse Email" autofocus="" required="">
      </div>
      <div class="form-group">
        <label for="login-password">Password</label>
        <input type="password" class="form-control" id="login-password" name="password" placeholder="Mot de passe" required="">
        <a id="reset-popup-trigger" href="stylering.html">forgotten your password?</a>
      </div>
      <button type="submit" id="connect-form-trigger" class="btn btn-blue">Sign in</button>
    </form>
  </div>
</div>

<div id="register-popup-display" class="fullsize-shadow">
  <div class="popup" style="height:360px;">
    <form id="register-form" method="POST">
      <div class="box-title">
          <img alt="jweel logo" src="../static/img/logo/jweel.png">
          <div style="position: absolute; top: 0; right: 0; text-align:right; padding-right: 10px;">
            <h2>Register !</h2><br>
            <span class="error"></span><br>
            <a id="to-connect-trigger" style="display:none;" href="stylering.html">Sign in!</a>
          </div>
      </div>
      <div class="form-group">
        <label for="register-email">E-mail Address</label>
        <input type="email" class="form-control" id="register-email" name="email" placeholder="Adresse Email" autofocus="" required="">
      </div>
      <div class="form-group">
        <label for="register-password">Password</label>
        <input type="password" class="form-control" id="register-password" name="password" placeholder="Mot de passe" required="">
      </div>
      <div class="checkbox">
        <label>
            <input type="checkbox" required=""> I accept the <a target="_blank" href="terms.html">terms and conditions of Jweel</a>
        </label>
      </div>
        <button type="submit" id="register-form-trigger" class="btn btn-blue">Join</button>
    </form>
  </div>
</div>

<div id="reset-popup-display" class="fullsize-shadow">
  <div class="popup" style="height:260px;">
    <form id="reset-form" method="POST">
      <div class="box-title">
          <img alt="jweel logo" src="../static/img/logo/jweel.png">
          <h2 style="font-size:20px; margin-top:5px;">Retrieve your account</h2>
          <span class="error"></span>
      </div>
      <div class="form-group">
        <label for="reset-email">E-mail Address</label>
        <input type="email" class="form-control" id="reset-email" name="reset-email" placeholder="Adresse Email" autofocus="" required="">
      </div>
      <button type="submit" id="reset-form-trigger" class="btn btn-blue">Send me an retrieval email</button>
    </form>
  </div>
</div>


<!-- Modal -->
<!--
<div class="explanation-modal modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="display:none;">
        <h2 class="modal-title" id="myModalLabel"></h2>
      </div>
      <div class="modal-body">
        <p>Here goes the symmetries explanation</p>
      </div>
      <div class="modal-footer" style="display:none;">
      </div>
    </div>
  </div>
</div>
-->

<div class="overlay-help modal fade in" role="dialog" aria-hidden="true">
    <div class="slide carousel" id="carousel-help">
        <div class="carousel-inner">
            <div class="item active">
                <div class="legends">
                    <div class="legend"><img src="../static/img/help/stylering.png" alt=""></div>
                    <!--<span class="legend nav-legend">Bague texte / Anneau nu / Bague multi-anneau</span>
                    <span class="legend fonts-legend"><b>1.</b> Choisissez votre police de caractère.</span>
                    <span class="legend text-legend"><b>2.</b> Choisissez votre texte.</span>
                    <span class="legend size-legend"><b>3.</b> Choisissez votre taille de bague.</span>
                    <span class="legend generate-legend"><b>4.</b> Générez la vue 3D.</span>
                    <span class="legend shuffle-legend">Shuffle / Remise à zéro.</span>-->
                </div>
                <div class="description text-right">
                    <h3>Freestyle ring</h3>
                    <h2>Your ring in 3D<br>thanks to the advanced tool</h2>
                    <button type="button" class="btn close-help-trigger" data-dismiss="modal">I get it, let me create</button>
                    <button type="button" data-target="#carousel-help" class="btn go-next-slide-trigger" data-slide="next">Next hint</button>
                    <label><input type="checkbox" name="close-help">Don't show this message again</label>
                </div>
            </div>
            <div class="item">
                <div class="legends">
                    <div class="legend"><img src="../static/img/help/stylering.png" alt=""></div>
                </div>
                <div class="description text-right">
                    <h3>Skimring</h3>
                    <h2>Your ring in 3D<br>thanks to the text tools</h2>
                    <button type="button" class="btn close-help-trigger" data-dismiss="modal">I get it, let me create</button>
                    <button type="button" data-target="#carousel-help" class="btn go-next-slide-trigger" data-slide="next">Next hint</button>
                </div>
            </div>
        </div>
        <ul class="carousel-indicators">
            <li data-target="#carousel-help" data-slide-to="0" class="active"><span></span></li>
            <li data-target="#carousel-help" data-slide-to="1"><span></span></li>
        </ul>
    </div>
</div>



        <!-- load js libs at the end of the document (for speed) -->




    <script>
        window.media = "http://www.jweel.com";
        window.base_url = "http://www.jweel.com";
        window.base_lang_url = "http://www.jweel.com/en";
        window.static_url = "../static";

        // Rewrite for local hack
        window.media = "..";
        window.base_url = "http://www.jweel.com";
        window.base_lang_url = "http://www.jweel.com/en";
        window.static_url = "../static";

        window.lang = "en";

        window.geo = {
            "city"        : "GRENOBLE",
            "country"     : "FR",
            "zipcode"     : "",
            "citylatlong" : "45.188529,5.724524",
        }
        window.currency_symbol = "€";
    </script>


        <script src="../static/js/djangojs.js"></script>
        <script>
            window.gettext=function(s){
                if(djangojs_dic[s]){
                    return djangojs_dic[s];
                }else{
                    return s;
                }
            }
        </script>
    <script>
        window.cartData = new CartManager();

        $("img.lazy").lazyload({
            threshold : 400,
            effect : "fadeIn",
            skip_invisible : false
        });
    </script>

<script>
    window.userMsgs = {};

    window.userMsgs.defaultError = function() {
        bootbox.alert("Sorry, an unknown error occured. In order to improve the quality of our services, this event has been registered.");
    };

    window.userMsgs.needToBeRegisteredMsgError = function () {
        bootbox.dialog({
            message: 'Vous devez être utilisateur de jweel pour effectuer cette action.\n Voulez-vous vous inscrire?',
            title: 'You need to sign in',
            buttons: {
                cancel: {
                    label: 'Cancel',
                    className: "btn btn-blue",
                    callback: function() {
                    }
                },
                connect: {
                    label: 'Sign in',
                    className: "btn btn-blue",
                    callback: function() {
                        showConnectPopup();
                    }
                },
                register: {
                    label: 'Register',
                    className: "btn btn-blue",
                    callback: function() {
                        showRegisterPopup();
                    }
                }
            }
        });
    };

    window.userMsgs.customErrorMsg = function (msg) {
        if (msg===undefined || msg==="") {
            window.userMsgs.defaultError();
        } else {
            bootbox.alert(msg);
        }
    };

    window.getThumb = function( file ) {
        var base = 'http://www.jweel.com/img/';

        if( file.thumb_small ) {
            return base + JSON.parse(file.thumb_small)['key'];
        }
        else if( file.thumb ) {
            return base + JSON.parse(file.thumb)['key'];
        }
        else {
            return "#";
        }
    }

    window.onload = function() {
        $("#connect-form").submit(login);
        $("#register-form").submit(
            function(e) {
                $('#register-form-trigger').attr('disabled', true);
                register(e);
                e.preventDefault();
                return false;
            }
        );
        $("#reset-form").submit(reset);
        $('.cartitem-delete').click(window.cartData.instanciateCartDel())
        $('.order-trigger').click(function() {
            location.href = window.base_lang_url + "/checkout/";
        });




        window.resolveZipCode();

    };

    $('#fadeout-end-of-service').click(function(){
        $('#end-of-service-display').fadeOut();
    });

    var displayEndOfService = function(){$('#end-of-service-display').fadeIn();};

</script>

<script type="text/javascript" src="../static/js/site/ajax.min.js"></script>
<script type="text/javascript" src="../static/js/jquery/jquery.knob.js"></script>
<script type="text/javascript">

window.downloadFile = function( blob , filename, ext) {
    var a = document.createElement('a');
    a.href = window.URL.createObjectURL(blob);
    var ext = ext ? ext : ".obj";
    if(filename){
        a.download = filename+ext;
    }else{
        a.download = ""+ext;
        if(a.download === ext){
            if(window.fileData.getFileName() !== ""){
                a.download = window.fileData.getFileName();
            }
        }
    }
    if(a.download === ext){a.download = "model"+ext;}

    // simulate a click on the link
    if (document.createEvent) {
        var event = document.createEvent("MouseEvents");
        event.initEvent("click", true, true);
        a.dispatchEvent(event);
    } else {
        a.click();
    }
};

$('#export-obj').click(function() {
    $('#export-obj').text("Exporting...");
    $('#export-obj').prop("disabled",true);
    var mat = new THREE.Matrix4();
    var callback = function(blob , filename, ext){
        window.downloadFile(blob , filename, ext);
        $('#export-obj').prop("disabled",false);
        $('#export-obj').text("Export to OBJ");
    };
    if(window.jweelTool.getToolType() === "embossedring" || window.jweelTool.getToolType() === "stylering"){
        console.log("... Scaling according to size.");
        var s = $('.range').slider('value');
        mat.scale(new THREE.Vector3(s/54, s/54,s/54));
        window.jweelTool.exportMesh(callback, mat);
    }else{
        window.jweelTool.exportMesh(callback);
    }
});

window.donePostInit = function (tool) {
    // Create CartSelect manager first
    window.cartSelect = new CartSelectManager($('#select-material'), $('#select-finish-display'));
    
    // Only proceed with material setup once skim and CartSelect are ready
    window.skimReady.then(() => {
        window.cartSelect.runWhenInitialized(function() {
            console.log("Cart select initialized, setting up materials");
            
            // Set initial material
            var material = window.cartSelect.matSelect.val();
            var finish = window.cartSelect.finishSelect[material].val();
            tool.loadMaterial(material, finish);
            
            // Listen for material changes
            window.cartSelect.addChangeFunction(function () {
                var material = window.cartSelect.matSelect.val();
                var finish = window.cartSelect.finishSelect[material].val();
                tool.loadMaterial(material, finish);
            });

            // Set default material for Jweel
            if (skim.instances.modeler && skim.instances.modeler.sceneManager) {
                skim.instances.modeler.sceneManager.setSurfaceMaterial(
                    skim.gl_materials["Uniform Physical Material"].get(function(attrs){})
                );
            }
        });
    }).catch(err => {
        console.error('Failed to initialize materials:', err);
    });
};

window.launchTool = function (tool, callback) {



    window.fileData = new FileManager(tool);
    window.cartData.setFileData(window.fileData);



    callback();
    // Launch the init
    tool.init();

    $('.save-file-trigger').click(window.fileData.instanciateSave());
    //$("#copy-file").click(window.fileData.instanciateCopy());
    //$("#publish-file").click(window.fileData.instanciatePublish());
    //$("#new-file").click(window.fileData.instanciateResetEverything());
    //$('.add-cart-trigger').click( window.cartData.instanciateAddToCart());

    $('#load-file-input').hide();
    $('.load-file-trigger').click(function(){
            $('#load-file-input').click();
        }
    );
    $('#load-file-input').change(function(evt) {
        var files = evt.target.files; // FileList object

        // split extension and filename
        var tags = files[0].name.split('.');
        var name = "";
        for(var i=0; i<tags.length-1; ++i){
            name = name + tags[i];
        }

        var ext = "";
        if(tags.length > 1){
            ext = tags[tags.length-1];
        }

        var fr = new FileReader();
        fr.onload = function(e) {
            // e.target.result should contain the text
            var json = JSON.parse(e.target.result);
            if(json.tooltype === window.fileData.getToolType()){
                skim.engine.reset();
                window.fileData.setFileName(name);
                tool.loadjsonInfo(json.jsonInfo);
                tool.setToolInfo(JSON.parse(json.toolInfo));
                tool.loadObject();
            }else{
                alert("Bad file format. Check that you gave a Jweel file and tried to load it using the adapted tool.");
            }
        };
        fr.readAsText(files[0]);
    });

};

window.update_object_data = function (volume, surface, aabb) {
    window.fileData.updateObjectData(volume, surface, aabb);
    window.cartData.requestPriceData();
};


// init menu
$('.icon-question').popover({
    placement: 'right',
    trigger: "hover",
    container: 'body',
    html: true,
    delay: { show: 400, hide: 400 }
});



window.hideHand = function() {
    $('.btn-hand').removeClass('active');
    window.jweelTool.triggerEvent("hideHand");
};

$('.btn-hand').click(function() {
    $(this).toggleClass('active');
    window.jweelTool.triggerEvent($(this).hasClass('active') ? "showHand" : "hideHand");
});

</script>

<script>

    window.helper_params = {
        "lastMode": "",
        "lastHeight": 0,
        "timeout": null
    };

    window.update_helper = function(helpmsg, evt_dic) {
        clearTimeout(window.helper_params.timeout);
        if( helpmsg ) {
            window.showToolTip(helpmsg);
        }

        window.helper_params.timeout = setTimeout(
            function() {
                window.build_helper(evt_dic);
            },
            0
        );
    };

    // ToolTip is available on start (no cart showing)
    window.isToolTipAvailable = true;
    window.userWantsTooltip = true;
    window.show_cart = function () {
        $('#helper-content').fadeOut(0);
        $('#tooltip').fadeOut(0);
        $('#cart-content').fadeIn(0);
        window.isToolTipAvailable = false;
    };

    window.show_helper = function () {
        $('#cart-content').fadeOut(0);
        $('#tooltip').fadeIn(0);
        $('#helper-content').fadeIn(0);
        window.isToolTipAvailable = true;
    };

    window.showToolTip = function(tip) {
        if (window.userWantsTooltip && window.isToolTipAvailable) {
            $('#tooltip').fadeOut(0, function() {
                if( tip != "" ) {
                    $('#tooltip .tip').html("<b>" + "Help:" + "</b> " + tip);
                    $('#tooltip').fadeIn(0);
                }
            });
        }
    };

    window.hideToolTip = function(event) {
        $('#tooltip').fadeOut(0);
    };

    $('#shrink-tooltip').click( function() {
        window.userWantsTooltip = false;

        $('#tooltip').css('visibility', 'hidden');
        $.when( $('#tooltip').effect( "transfer", { "to" : $('#expand-tooltip'), }, 800 )).done( function() {
            $('#expand-tooltip').css('visibility', 'visible');
        });
    });

    $('#expand-tooltip').click( function() {
        window.userWantsTooltip = true;

        $('#expand-tooltip').css('visibility', 'hidden');
        $.when( $('#expand-tooltip').effect( "transfer", { "to" : $('#tooltip'), }, 800 )).done( function() {
            $('#tooltip').css('visibility', 'visible');
        });
    });

    window.imgCache = {};
    window.wrap_img = function( src, imgclass ) {
        if( window.imgCache[src] == undefined ) {
            window.imgCache[src] = $('<img/>', {"class":"imgclass", "src":window.media+'/static/img/helper/'+src});
        }
        return window.imgCache[src].clone();
    };

    window.append_control_output = function(parentEl, control, on) {
        var split = control.split(':');

        if( split[0] == 'mouse1' ||
            split[0] == 'mouse2' ||
            split[0] == 'mouse3' ||
            split[0] == 'scroll' ||
            split[0] == 'dblclick' ||
            split[0] == "mousemove")
        {
            var ctrl = split[0];
            if( ctrl == "mouse1" )
                ctrl = window.wrap_img("mouse-left.png", 'imgshortcut');
            else if( ctrl == "mouse3" )
                ctrl = window.wrap_img("mouse-right.png", 'imgshortcut');
            else if( ctrl == "scroll" || ctrl == "mouse2" )
                ctrl = window.wrap_img("mouse-middle.png", 'imgshortcut');
            else if( ctrl == "dblclick" )
                ctrl = $('<span/>').text('').append(window.wrap_img("mouse-left.png", 'imgshortcut')).append('<span> x 2</span>');
            else if( ctrl == "mousemove" )
                ctrl = window.wrap_img("mouse.png", 'imgshortcut');
            else
                ctrl = $('<span/>').text(ctrl);

            var onText = " on ";
            if(on == "vertex")
                on = $('<span/>').text(onText).append(window.wrap_img('vertex.png', 'imgon'));
            else if( on == "segment" )
                on = $('<span/>').text(onText).append(window.wrap_img('primitive.png', 'imgon'));
            else if( on == "triangle" )
                on = $('<span/>').text(onText).append(window.wrap_img('triangle.png', 'imgon'));
            else if( on != '' )
                on = $('<span/>').text(onText + on + ' ');

            parentEl.append(ctrl);
            if( on != '' )
                parentEl.append(on);
        }
        else {
            // keyboard controls
            var keys = split[0].split('+');
            var r = '';

            for( var i=0; i<keys.length; i++ ) {
                if( i!= 0 ) {
                    parentEl.append( $('<span/>').text(' + ') );
                }
                parentEl.append( $('<kbd/>', {class:'light'}).text(keys[i]) );
            }
            if( on != '' ) {
                parentEl.append(' on ' + on);
            }
        }
    };

    window.build_helper = function(evt_dic) {
        if( evt_dic === null ) {
            return;
        }
        //$('.helper-title').text(window.helper_params.lastMode);
        $('.helper-title').fadeOut();
        var controlbox = $('<div/>', { id: 'controlbox', css: 'display:none'});

        // add each category one by one
        var keys = Object.keys(evt_dic).sort();
        for(var i=0; i<keys.length; i++) {
            var key = keys[i];
            if( key === 'length' || !evt_dic.hasOwnProperty(key) ) continue;

            var evts = evt_dic[key];

            // compute table
            var table = $('<table/>');
            for(var j=0; j<evts.length; j++) {
                var evt = evts[j];

                if( evt.helper != '' ){
                    // compute shortcut
                    var shortcut = $('<td/>', {class:'shortcut'});
                    var s = "";
                    for(var k=0; k<evt.controls.length; k++) {
                        window.append_control_output(shortcut, evt.controls[k][0], evt.controls[k][1]);
                        if( k != evt.controls.length-1 )
                            shortcut.append($('<span/>').text(' or '));
                    }

                    var tr = $('<tr/>').append(
                        shortcut,
                        $('<td/>', {class:'command_desc'}).append(
                            $('<span/>').text( evt.helper[1] )
                        )
                    );

                    /*
                    if( evt.helpmsg != ""  ) {
                        tr.append(
                            $('<td/>',
                            {
                                class: 'tooltip',
                                css: {
                                    display: "none"
                                }
                            }).html( evt.helpmsg )
                        );
                        tr.hover(window.showToolTip, window.hideToolTip);
                        tr.on('remove', window.hideToolTip);
                    }
                    */

                    table.append(tr);
                }
            }

            controlbox.append(
                $('<div/>', {class:'controls content'}).append(
                    $('<h3/>').text(key),
                    table
                )
            );
            var nbChild = controlbox[0].childNodes.length;
        }

        var p = $('#controlbox').parent();
        $('#controlbox').remove();
        p.append(controlbox);
        controlbox.fadeIn(100);

        var boxheight = $('#controlbox').height() - 20;
        if( boxheight != window.helper_params.lastHeight ) {
            $('#vertical-wrapper').height(boxheight);
            $('div.vertical-triangle').height(boxheight);
            window.helper_params.lastHeight = boxheight;
        }
    };

    window.select_switchBlend = function () {
        jweelTool.switchBlend($(this).val());
    };

    window.show_surface_flash_button = null;
    window.flash_surface_button = function() {
        window.show_surface_flash_button = setInterval(function() {
            if ($('#surface-trigger').hasClass("btn-blue")) {
                $('#surface-trigger').removeClass("btn-blue");
                $('#surface-trigger').addClass("btn-blueinvert");
            } else {
                $('#surface-trigger').removeClass("btn-blueinvert");
                $('#surface-trigger').addClass("btn-blue");
            }
        }, 1000);
    };

    window.stop_flash_surface_button = function() {
        if (!$('#surface-trigger').hasClass("btn-blue")) {
            $('#surface-trigger').removeClass("btn-blueinvert");
            $('#surface-trigger').addClass("btn-blue");
        }

        clearInterval(window.show_surface_flash_button);
    };


    // assign functions to button
    $(".sym-box").click(function() {
        $(this).toggleClass("active");
    });

    window.show_symmetries_el = function (el, show) {
        show ? el.addClass('active') : el.removeClass('active');
    };

    window.show_symmetries = function(sym) {
        window.show_symmetries_el($('#xSym'), sym.x);
        window.show_symmetries_el($('#ySym'), sym.y);
        window.show_symmetries_el($('#zSym'), sym.z);
    };

    window.updateStyleRingMenu = function (menuOptions) {

        $('.range').slider('value', menuOptions.size);
        $('.range-container .size-info').text(menuOptions.size + 'mm');

        $('.surface-switch-trigger').off('change');
        $(".surface-switch-trigger").selectpicker('val', menuOptions.prims);
        $(".surface-switch-trigger").selectpicker('refresh');
        $('.surface-switch-trigger').on('change', window.select_switchBlend);
    };

    window.start_surface = function () {
        $('#surface-trigger').text('Computing final render');
        $('#surface-trigger').append(jweelTool.loadingGif);
        window.stop_flash_surface_button();
        //$('.surface-show-hook').prop('disabled',true);
        window.cartData.reset_price();
    };

    window.done_surface = function () {
        window.flash_surface_button();
        //$('.surface-show-hook').prop('disabled',false);
        window.cartData.update_price();
    };

    window.show_surface_controls = function() {
        window.show_cart();
        $('#surface-trigger').text('Back to the model');
        window.stop_flash_surface_button();
        window.jweelTool.progress.hide();
        $('.hand-buttons').show();
    };

    window.hide_surface_controls = function() {
        window.show_helper();
        $('#surface-trigger').text('View my ring');
        window.jweelTool.progress.show();
        $('.hand-buttons').hide();
    };


    // Callbacks used in the jweelTool
    var pageInterface = {
        surfaceShown     : window.show_surface_controls,
        surfaceHidden    : window.hide_surface_controls,
        helperUpdate     : window.update_helper,
        showSymmetries   : window.show_symmetries,
        updateObjectData : window.update_object_data,
        startSurface     : window.start_surface,
        doneSurface      : window.done_surface,
        updateToolMenu   : window.updateStyleRingMenu,
        donePostInit     : window.donePostInit
    };

    window.jweelTool = new site.StyleringTool(
        viewerCanvas,
        site.toolModes.edit,
        pageInterface
    );

    window.launchTool(window.jweelTool, function () {
        //Init range
        $('.range-size').each(function() {
            var $elt = $(this);

            $elt.slider(
                {
                    disabled : false,
                    min: window.cartData.getMinRange(),
                    max: window.cartData.getMaxRange(),
                    step: window.cartData.getStep(),
                    value: window.cartData.getDefaultVal(),
                    change: function(event, ui) {
                        window.cartData.setSize(ui.value);
                        window.cartData.update_price();
                    },
                    slide: function(event, ui) {
                        if(event.originalEvent) {
                            $('.range-value').text(ui.value+'mm');
                        }
                    }
                }
            );
        });
    });

    $('#fadeout-end-of-service').click(function(){
        $('#end-of-service-display').fadeOut();
    });

    var displayEndOfService = function(){$('#end-of-service-display').fadeIn();};

</script>



</body></html>